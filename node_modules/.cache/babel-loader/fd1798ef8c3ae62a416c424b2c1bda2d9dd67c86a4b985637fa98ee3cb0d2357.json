{"ast":null,"code":"import React,{useState,useEffect}from'react';import{useNavigate}from\"react-router-dom\";import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";const Ratings=()=>{const navigate=useNavigate();const[columns,setColumns]=useState([]);const[records,setRecords]=useState([]);useEffect(()=>{if(!window.sessionStorage.getItem(\"auth\"))navigate('/unauthorized');fetch('http://localhost:8000/ratings/').then(res=>res.json()).then(data=>{const columns=Object.keys(data.Ratings[0]);columns.splice(2,0,'user');setColumns(columns.filter(key=>!['first_name','last_name'].includes(key)));setRecords(data.Ratings);}).catch(error=>console.error(error));},[]);return/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"h2\",{children:\"Movie Ratings\"}),/*#__PURE__*/_jsxs(\"table\",{className:\"table\",children:[/*#__PURE__*/_jsx(\"thead\",{children:/*#__PURE__*/_jsx(\"tr\",{children:columns.map((c,i)=>/*#__PURE__*/_jsx(\"th\",{children:c.replaceAll(\"_\",\" \").toUpperCase()},i))})}),/*#__PURE__*/_jsx(\"tbody\",{children:records.map((record,i)=>/*#__PURE__*/_jsxs(\"tr\",{children:[/*#__PURE__*/_jsx(\"td\",{children:record.rating_id}),/*#__PURE__*/_jsx(\"td\",{children:record.first_name+' '+record.last_name}),/*#__PURE__*/_jsx(\"td\",{children:record.value}),/*#__PURE__*/_jsx(\"td\",{children:record.title}),/*#__PURE__*/_jsx(\"td\",{children:record.comments})]},i))})]}),/*#__PURE__*/_jsx(\"button\",{className:\"link-btn\",onClick:()=>navigate('/newratingentry'),children:\"+Add Rating Entry\"})]});};export default Ratings;","map":{"version":3,"names":["React","useState","useEffect","useNavigate","jsx","_jsx","jsxs","_jsxs","Ratings","navigate","columns","setColumns","records","setRecords","window","sessionStorage","getItem","fetch","then","res","json","data","Object","keys","splice","filter","key","includes","catch","error","console","children","className","map","c","i","replaceAll","toUpperCase","record","rating_id","first_name","last_name","value","title","comments","onClick"],"sources":["/Users/sergio/Documents/Classes/CS-415/cs415_project/website/src/Components/Ratings.jsx"],"sourcesContent":["import React, {useState, useEffect} from 'react'\nimport { useNavigate } from \"react-router-dom\"\n\n\nconst Ratings = () => {\n    const navigate = useNavigate();\n    const [columns, setColumns] = useState([]);\n    const [records, setRecords] = useState([]);\n\n    useEffect(() => {\n        if (!window.sessionStorage.getItem(\"auth\")) navigate('/unauthorized')\n        fetch('http://localhost:8000/ratings/')\n        .then(res => res.json())\n        .then(data => {\n            const columns = Object.keys(data.Ratings[0]);\n            columns.splice(2, 0, 'user');\n            setColumns(columns.filter((key) => !['first_name', 'last_name'].includes(key)));\n            setRecords(data.Ratings)\n        })\n        .catch(error => console.error(error));\n    }, []);\n\n  return (\n    <div>\n        <h2>Movie Ratings</h2>\n        <table className='table'>\n            <thead>\n                <tr>\n                    {columns.map((c, i) => (\n                        <th key={i}>{c.replaceAll(\"_\", \" \").toUpperCase()}</th>\n                    ))}\n                </tr>\n            </thead>\n            <tbody>\n                {\n                    records.map((record,i) => (\n                        <tr key={i}>\n                            <td>{record.rating_id}</td>\n                            <td>{record.first_name + ' ' + record.last_name}</td>\n                            <td>{record.value}</td>\n                            <td>{record.title}</td>\n                            <td>{record.comments}</td>\n                        </tr>\n                    ))\n                }\n            </tbody>\n        </table>\n        <button className=\"link-btn\" onClick={() => navigate('/newratingentry')}>+Add Rating Entry</button>\n    </div>\n\n  )\n}\n\nexport default Ratings"],"mappings":"AAAA,MAAO,CAAAA,KAAK,EAAGC,QAAQ,CAAEC,SAAS,KAAO,OAAO,CAChD,OAASC,WAAW,KAAQ,kBAAkB,QAAAC,GAAA,IAAAC,IAAA,gCAAAC,IAAA,IAAAC,KAAA,yBAG9C,KAAM,CAAAC,OAAO,CAAGA,CAAA,GAAM,CAClB,KAAM,CAAAC,QAAQ,CAAGN,WAAW,CAAC,CAAC,CAC9B,KAAM,CAACO,OAAO,CAAEC,UAAU,CAAC,CAAGV,QAAQ,CAAC,EAAE,CAAC,CAC1C,KAAM,CAACW,OAAO,CAAEC,UAAU,CAAC,CAAGZ,QAAQ,CAAC,EAAE,CAAC,CAE1CC,SAAS,CAAC,IAAM,CACZ,GAAI,CAACY,MAAM,CAACC,cAAc,CAACC,OAAO,CAAC,MAAM,CAAC,CAAEP,QAAQ,CAAC,eAAe,CAAC,CACrEQ,KAAK,CAAC,gCAAgC,CAAC,CACtCC,IAAI,CAACC,GAAG,EAAIA,GAAG,CAACC,IAAI,CAAC,CAAC,CAAC,CACvBF,IAAI,CAACG,IAAI,EAAI,CACV,KAAM,CAAAX,OAAO,CAAGY,MAAM,CAACC,IAAI,CAACF,IAAI,CAACb,OAAO,CAAC,CAAC,CAAC,CAAC,CAC5CE,OAAO,CAACc,MAAM,CAAC,CAAC,CAAE,CAAC,CAAE,MAAM,CAAC,CAC5Bb,UAAU,CAACD,OAAO,CAACe,MAAM,CAAEC,GAAG,EAAK,CAAC,CAAC,YAAY,CAAE,WAAW,CAAC,CAACC,QAAQ,CAACD,GAAG,CAAC,CAAC,CAAC,CAC/Eb,UAAU,CAACQ,IAAI,CAACb,OAAO,CAAC,CAC5B,CAAC,CAAC,CACDoB,KAAK,CAACC,KAAK,EAAIC,OAAO,CAACD,KAAK,CAACA,KAAK,CAAC,CAAC,CACzC,CAAC,CAAE,EAAE,CAAC,CAER,mBACEtB,KAAA,QAAAwB,QAAA,eACI1B,IAAA,OAAA0B,QAAA,CAAI,eAAa,CAAI,CAAC,cACtBxB,KAAA,UAAOyB,SAAS,CAAC,OAAO,CAAAD,QAAA,eACpB1B,IAAA,UAAA0B,QAAA,cACI1B,IAAA,OAAA0B,QAAA,CACKrB,OAAO,CAACuB,GAAG,CAAC,CAACC,CAAC,CAAEC,CAAC,gBACd9B,IAAA,OAAA0B,QAAA,CAAaG,CAAC,CAACE,UAAU,CAAC,GAAG,CAAE,GAAG,CAAC,CAACC,WAAW,CAAC,CAAC,EAAxCF,CAA6C,CACzD,CAAC,CACF,CAAC,CACF,CAAC,cACR9B,IAAA,UAAA0B,QAAA,CAEQnB,OAAO,CAACqB,GAAG,CAAC,CAACK,MAAM,CAACH,CAAC,gBACjB5B,KAAA,OAAAwB,QAAA,eACI1B,IAAA,OAAA0B,QAAA,CAAKO,MAAM,CAACC,SAAS,CAAK,CAAC,cAC3BlC,IAAA,OAAA0B,QAAA,CAAKO,MAAM,CAACE,UAAU,CAAG,GAAG,CAAGF,MAAM,CAACG,SAAS,CAAK,CAAC,cACrDpC,IAAA,OAAA0B,QAAA,CAAKO,MAAM,CAACI,KAAK,CAAK,CAAC,cACvBrC,IAAA,OAAA0B,QAAA,CAAKO,MAAM,CAACK,KAAK,CAAK,CAAC,cACvBtC,IAAA,OAAA0B,QAAA,CAAKO,MAAM,CAACM,QAAQ,CAAK,CAAC,GALrBT,CAML,CACP,CAAC,CAEH,CAAC,EACL,CAAC,cACR9B,IAAA,WAAQ2B,SAAS,CAAC,UAAU,CAACa,OAAO,CAAEA,CAAA,GAAMpC,QAAQ,CAAC,iBAAiB,CAAE,CAAAsB,QAAA,CAAC,mBAAiB,CAAQ,CAAC,EAClG,CAAC,CAGV,CAAC,CAED,cAAe,CAAAvB,OAAO"},"metadata":{},"sourceType":"module","externalDependencies":[]}