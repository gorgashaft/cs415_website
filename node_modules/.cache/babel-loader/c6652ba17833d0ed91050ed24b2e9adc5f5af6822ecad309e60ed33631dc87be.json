{"ast":null,"code":"import React,{useState,useEffect}from\"react\";import{useNavigate}from\"react-router-dom\";import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";export const AddMovie=props=>{const navigate=useNavigate();const[title,setTitle]=useState('');const[director,setDirector]=useState('');const[release_date,setRelease]=useState('');const[studioId,setStudioId]=useState('');const[genreId,setGenreId]=useState('');const[studios,setStudios]=useState([]);const[genres,setGenres]=useState([]);const[error,setError]=useState('');console.log(studios);// Fetch Studios\nuseEffect(()=>{fetch('http://localhost:8000/studio/').then(response=>response.json()).then(data=>setStudios(data.Studios)).catch(error=>console.error(\"Failed to load studios\",error));},[]);// Fetch Genres\nuseEffect(()=>{fetch('http://localhost:8000/genre/').then(response=>response.json()).then(data=>setGenres(data.Genres)).catch(error=>console.error(\"Failed to load genres\",error));},[]);const handleSubmit=e=>{e.preventDefault();setError(null);let success=true;let errorText='';const payload=JSON.stringify({title,director,release_date,studioId,genreId});fetch('http://localhost:8000/movies/',{method:'POST',body:payload,headers:{'Content-Type':'application/json'}}).then(res=>{if(!res.ok){success=false;return res.text().then(text=>{throw new Error(text);});}return res.json();}).then(()=>{if(success){// Reset form on success\nsetTitle('');setDirector('');setRelease('');setStudioId('');setGenreId('');setError('Movie Registered Successfully!');}}).catch(error=>{console.error(error);setError('Error Registering - Check your information and try again');});};return/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"h2\",{children:\"New Movie Entry\"}),/*#__PURE__*/_jsxs(\"form\",{className:\"register-form\",onSubmit:handleSubmit,children:[/*#__PURE__*/_jsx(\"label\",{htmlFor:\"title\",children:\"Title\"}),/*#__PURE__*/_jsx(\"input\",{required:true,value:title,onChange:e=>setTitle(e.target.value),type:\"text\",placeholder:\"Title\",id:\"title\",name:\"title\"}),/*#__PURE__*/_jsx(\"label\",{htmlFor:\"director\",children:\"Director\"}),/*#__PURE__*/_jsx(\"input\",{required:true,value:director,onChange:e=>setDirector(e.target.value),type:\"text\",placeholder:\"Director\",id:\"director\",name:\"director\"}),/*#__PURE__*/_jsx(\"label\",{htmlFor:\"release_date\",children:\"Release Date\"}),/*#__PURE__*/_jsx(\"input\",{required:true,value:release_date,onChange:e=>setRelease(e.target.value),type:\"date\",placeholder:\"Release Date\",id:\"release_date\",name:\"release_date\"}),/*#__PURE__*/_jsx(\"label\",{htmlFor:\"studio\",children:\"Studio\"}),/*#__PURE__*/_jsxs(\"select\",{required:true,value:studioId,onChange:e=>setStudioId(e.target.value),id:\"studio\",name:\"studio\",children:[/*#__PURE__*/_jsx(\"option\",{value:\"\",children:\"Studio\"}),studios.map(studio=>/*#__PURE__*/_jsx(\"option\",{value:studio.studio_id,children:studio.studio},studio.studio_id))]}),/*#__PURE__*/_jsx(\"label\",{htmlFor:\"genre\",children:\"Genre\"}),/*#__PURE__*/_jsxs(\"select\",{required:true,value:genreId,onChange:e=>setGenreId(e.target.value),id:\"genre\",name:\"genre\",children:[/*#__PURE__*/_jsx(\"option\",{value:\"\",children:\"Select Genre\"}),genres.map(genre=>/*#__PURE__*/_jsx(\"option\",{value:genre.genre_id,children:genre.genre},genre.genre_id))]}),/*#__PURE__*/_jsx(\"button\",{type:\"submit\",children:\"Submit\"}),/*#__PURE__*/_jsx(\"p\",{className:\"text-success\",children:/*#__PURE__*/_jsx(\"b\",{children:error})})]})]});};export default AddMovie;","map":{"version":3,"names":["React","useState","useEffect","useNavigate","jsx","_jsx","jsxs","_jsxs","AddMovie","props","navigate","title","setTitle","director","setDirector","release_date","setRelease","studioId","setStudioId","genreId","setGenreId","studios","setStudios","genres","setGenres","error","setError","console","log","fetch","then","response","json","data","Studios","catch","Genres","handleSubmit","e","preventDefault","success","errorText","payload","JSON","stringify","method","body","headers","res","ok","text","Error","children","className","onSubmit","htmlFor","required","value","onChange","target","type","placeholder","id","name","map","studio","studio_id","genre","genre_id"],"sources":["/Users/sergio/Documents/Classes/CS-415/cs415_project/website/src/Components/AddMovie.jsx"],"sourcesContent":["import React, { useState, useEffect } from \"react\";\nimport { useNavigate } from \"react-router-dom\";\n\nexport const AddMovie = (props) => {\n    const navigate = useNavigate();\n    const [title, setTitle] = useState('');\n    const [director, setDirector] = useState('');\n    const [release_date, setRelease] = useState('');\n    const [studioId, setStudioId] = useState('');\n    const [genreId, setGenreId] = useState('');\n    const [studios, setStudios] = useState([]);\n    const [genres, setGenres] = useState([]);\n    const [error, setError] = useState('');\n\n    console.log(studios);\n    // Fetch Studios\n    useEffect(() => {\n        fetch('http://localhost:8000/studio/')\n            .then(response => response.json())\n            .then(data => setStudios(data.Studios))\n            .catch(error => console.error(\"Failed to load studios\", error));\n    }, []);\n\n    // Fetch Genres\n    useEffect(() => {\n        fetch('http://localhost:8000/genre/')\n            .then(response => response.json())\n            .then(data => setGenres(data.Genres))\n            .catch(error => console.error(\"Failed to load genres\", error));\n    }, []);\n\n    const handleSubmit = (e) => {\n        e.preventDefault();\n        setError(null);\n        let success = true;\n        let errorText = '';\n\n        const payload = JSON.stringify({\n            title,\n            director,\n            release_date,\n            studioId,\n            genreId\n        });\n\n        fetch('http://localhost:8000/movies/', {\n            method: 'POST',\n            body: payload,\n            headers: {\n                'Content-Type': 'application/json',\n            },\n        })\n        .then(res => {\n            if (!res.ok) {\n                success = false;\n                return res.text().then(text => { throw new Error(text) });\n            }\n            return res.json();\n        })\n        .then(() => {\n            if (success) {\n                // Reset form on success\n                setTitle('');\n                setDirector('');\n                setRelease('');\n                setStudioId('');\n                setGenreId('');\n                setError('Movie Registered Successfully!');\n            }\n        })\n        .catch(error => {\n            console.error(error);\n            setError('Error Registering - Check your information and try again');\n        });\n    };\n\n    return (\n        <div>\n            <h2>New Movie Entry</h2>\n            <form className=\"register-form\" onSubmit={handleSubmit}>\n                {/* Existing Fields */}\n                <label htmlFor=\"title\">Title</label>\n                <input required value={title} onChange={e => setTitle(e.target.value)} type=\"text\" placeholder=\"Title\" id=\"title\" name=\"title\"/>\n\n                <label htmlFor=\"director\">Director</label>\n                <input required value={director} onChange={e => setDirector(e.target.value)} type=\"text\" placeholder=\"Director\" id=\"director\" name=\"director\"/>\n\n                <label htmlFor=\"release_date\">Release Date</label>\n                <input required value={release_date} onChange={e => setRelease(e.target.value)} type=\"date\" placeholder=\"Release Date\" id=\"release_date\" name=\"release_date\"/>\n\n                {/* Studio Drop-down */}\n                <label htmlFor=\"studio\">Studio</label>\n                <select required value={studioId} onChange={e => setStudioId(e.target.value)} id=\"studio\" name=\"studio\">\n                    <option value=\"\">Studio</option>\n                    {studios.map(studio => (\n                        <option key={studio.studio_id} value={studio.studio_id}>{studio.studio}</option>\n                    ))}\n                </select>\n\n                {/* Genre Drop-down */}\n                <label htmlFor=\"genre\">Genre</label>\n                <select required value={genreId} onChange={e => setGenreId(e.target.value)} id=\"genre\" name=\"genre\">\n                    <option value=\"\">Select Genre</option>\n                    {genres.map(genre => (\n                        <option key={genre.genre_id} value={genre.genre_id}>{genre.genre}</option>\n                    ))}\n                </select>\n\n                <button type=\"submit\">Submit</button>\n                <p className=\"text-success\"><b>{error}</b></p>\n            </form>\n        </div>\n    );\n}\n\nexport default AddMovie;\n"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}