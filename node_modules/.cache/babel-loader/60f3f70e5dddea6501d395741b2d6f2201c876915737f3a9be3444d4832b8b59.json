{"ast":null,"code":"import React,{useState,useEffect}from'react';import{useNavigate}from\"react-router-dom\";import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";const UserProfile=()=>{const navigate=useNavigate();const[userColumns,setUserColumns]=useState([]);const[record,setRecord]=useState([]);const user_id=window.sessionStorage.getItem(\"user_id\");useEffect(()=>{if(!window.sessionStorage.getItem(\"auth\"))navigate('/unauthorized');fetch('http://localhost:8000/users/user/'+user_id).then(res=>res.json()).then(data=>{console.log(data);setUserColumns(Object.keys(data.User));setRecord(data.User);}).catch(error=>console.error(error));},[]);const handleLogout=e=>{e.preventDefault();window.sessionStorage.removeItem(\"auth\");window.sessionStorage.removeItem(\"user_id\");window.sessionStorage.removeItem(\"token\");navigate('/login');};return/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"h2\",{children:\"User\"}),/*#__PURE__*/_jsxs(\"table\",{className:\"table\",children:[/*#__PURE__*/_jsx(\"thead\",{children:/*#__PURE__*/_jsx(\"tr\",{children:userColumns.map((c,i)=>/*#__PURE__*/_jsx(\"th\",{children:c.replaceAll(\"_\",\" \").toUpperCase()},i))})}),/*#__PURE__*/_jsx(\"tbody\",{children:/*#__PURE__*/_jsxs(\"tr\",{children:[/*#__PURE__*/_jsx(\"td\",{children:record.user_id}),/*#__PURE__*/_jsx(\"td\",{children:record.first_name}),/*#__PURE__*/_jsx(\"td\",{children:record.last_name}),/*#__PURE__*/_jsx(\"td\",{class:\"hidetext\",children:record.password}),/*#__PURE__*/_jsx(\"td\",{children:record.username}),/*#__PURE__*/_jsx(\"td\",{children:record.email}),/*#__PURE__*/_jsx(\"td\",{children:record.date_created}),/*#__PURE__*/_jsx(\"td\",{children:record.is_active}),/*#__PURE__*/_jsx(\"td\",{children:record.last_login})]})})]}),/*#__PURE__*/_jsx(\"button\",{onClick:handleLogout,children:\"Logout\"})]});};export default UserProfile;// import React, { useState, useEffect } from 'react';\n// import { useNavigate } from 'react-router-dom';\n// const UserProfile = () => {\n//   const navigate = useNavigate();\n//   const [userColumns, setUserColumns] = useState([]);\n//   const [record, setRecord] = useState([]);\n//   const [movies, setMovies] = useState([]);\n//   const user_id = window.sessionStorage.getItem('user_id');\n//   useEffect(() => {\n//     if (!window.sessionStorage.getItem('auth')) navigate('/unauthorized');\n//     fetch('http://localhost:8000/users/user/' + user_id)\n//       .then((res) => res.json())\n//       .then((data) => {\n//         console.log(data);\n//         setUserColumns(Object.keys(data.User));\n//         setRecord(data.User);\n//       })\n//       .catch((error) => console.error(error));\n//     fetch('http://localhost:8000/ratings/' + user_id)\n//       .then((res) => res.json())\n//       .then((data) => {\n//         console.log(data);\n//         setMovies(data);\n//       })\n//       .catch((error) => console.error(error));\n//   }, []);\n//   const handleLogout = (e) => {\n//     e.preventDefault();\n//     window.sessionStorage.removeItem('auth');\n//     window.sessionStorage.removeItem('user_id');\n//     window.sessionStorage.removeItem('token');\n//     navigate('/login');\n//   };\n//   return (\n//     <div>\n//       <h2>User</h2>\n//       <table className=\"table\">\n//         <thead>\n//           <tr>\n//             {userColumns.map((c, i) => (\n//               <th key={i}>{c.replaceAll('_', ' ').toUpperCase()}</th>\n//             ))}\n//           </tr>\n//         </thead>\n//         <tbody>\n//           {record.map((user, i) => (\n//             <tr key={i}>\n//               <td>{user.user_id}</td>\n//               <td>{user.first_name}</td>\n//               <td>{user.last_name}</td>\n//               <td className=\"hidetext\">{user.password}</td>\n//               <td>{user.username}</td>\n//               <td>{user.email}</td>\n//               <td>{user.date_created}</td>\n//               <td>{user.is_active}</td>\n//               <td>{user.last_login}</td>\n//             </tr>\n//           ))}\n//         </tbody>\n//       </table>\n//       <h2>Movies Rated by User</h2>\n//       <table className=\"table\">\n//         <thead>\n//           <tr>\n//             <th>Movie ID</th>\n//             <th>Title</th>\n//             <th>Rating</th>\n//             <th>Comments</th>\n//           </tr>\n//         </thead>\n//         <tbody>\n//           {movies.map((movie, i) => (\n//             <tr key={i}>\n//               <td>{movie.movie_id}</td>\n//               <td>{movie.title}</td>\n//               <td>{movie.value}</td>\n//               <td>{movie.comments}</td>\n//             </tr>\n//           ))}\n//         </tbody>\n//       </table>\n//       <button onClick={handleLogout}>Logout</button>\n//     </div>\n//   );\n// };\n// export default UserProfile;","map":{"version":3,"names":["React","useState","useEffect","useNavigate","jsx","_jsx","jsxs","_jsxs","UserProfile","navigate","userColumns","setUserColumns","record","setRecord","user_id","window","sessionStorage","getItem","fetch","then","res","json","data","console","log","Object","keys","User","catch","error","handleLogout","e","preventDefault","removeItem","children","className","map","c","i","replaceAll","toUpperCase","first_name","last_name","class","password","username","email","date_created","is_active","last_login","onClick"],"sources":["/Users/sergio/Documents/Classes/CS-415/cs415_project/website/src/Components/UserProfile.jsx"],"sourcesContent":["import React, {useState, useEffect} from 'react'\nimport { useNavigate } from \"react-router-dom\"\n\nconst UserProfile = () => {\n    const navigate = useNavigate();\n    const [userColumns, setUserColumns] = useState([]);\n    const [record, setRecord] = useState([]);\n    const user_id = window.sessionStorage.getItem(\"user_id\")\n\n\n    useEffect(() => {\n        if (!window.sessionStorage.getItem(\"auth\")) navigate('/unauthorized')\n        fetch('http://localhost:8000/users/user/' + user_id)\n        .then(res => res.json())\n        .then(data => {\n            console.log(data)\n            setUserColumns(Object.keys(data.User))\n            setRecord(data.User)\n        })\n        .catch(error => console.error(error));\n    }, []);\n\n    const handleLogout = (e) => {\n        e.preventDefault();\n        window.sessionStorage.removeItem(\"auth\")\n        window.sessionStorage.removeItem(\"user_id\")\n        window.sessionStorage.removeItem(\"token\")\n        navigate('/login')\n    }\n\n  return (\n    <div>\n        <h2>User</h2>\n        <table className='table'>\n            <thead>\n                <tr>\n                    {\n                        userColumns.map((c, i) => (<th key={i}>{c.replaceAll(\"_\", \" \").toUpperCase()}</th>))\n                    }\n                </tr>\n            </thead>\n            <tbody>\n                {\n                    <tr>\n                        <td>{record.user_id}</td>\n                        <td>{record.first_name}</td>\n                        <td>{record.last_name}</td>\n                        <td class=\"hidetext\">{record.password}</td>\n                        <td>{record.username}</td>\n                        <td>{record.email}</td>\n                        <td>{record.date_created}</td>\n                        <td>{record.is_active}</td>\n                        <td>{record.last_login}</td>\n                    </tr>\n                }\n            </tbody>\n        </table>\n        <button onClick={handleLogout}>Logout</button>\n    </div>\n  )\n}\n\nexport default UserProfile\n// import React, { useState, useEffect } from 'react';\n// import { useNavigate } from 'react-router-dom';\n\n// const UserProfile = () => {\n//   const navigate = useNavigate();\n//   const [userColumns, setUserColumns] = useState([]);\n//   const [record, setRecord] = useState([]);\n//   const [movies, setMovies] = useState([]);\n//   const user_id = window.sessionStorage.getItem('user_id');\n\n//   useEffect(() => {\n//     if (!window.sessionStorage.getItem('auth')) navigate('/unauthorized');\n//     fetch('http://localhost:8000/users/user/' + user_id)\n//       .then((res) => res.json())\n//       .then((data) => {\n//         console.log(data);\n//         setUserColumns(Object.keys(data.User));\n//         setRecord(data.User);\n//       })\n//       .catch((error) => console.error(error));\n\n//     fetch('http://localhost:8000/ratings/' + user_id)\n//       .then((res) => res.json())\n//       .then((data) => {\n//         console.log(data);\n//         setMovies(data);\n//       })\n//       .catch((error) => console.error(error));\n//   }, []);\n\n//   const handleLogout = (e) => {\n//     e.preventDefault();\n//     window.sessionStorage.removeItem('auth');\n//     window.sessionStorage.removeItem('user_id');\n//     window.sessionStorage.removeItem('token');\n//     navigate('/login');\n//   };\n\n//   return (\n//     <div>\n//       <h2>User</h2>\n//       <table className=\"table\">\n//         <thead>\n//           <tr>\n//             {userColumns.map((c, i) => (\n//               <th key={i}>{c.replaceAll('_', ' ').toUpperCase()}</th>\n//             ))}\n//           </tr>\n//         </thead>\n//         <tbody>\n//           {record.map((user, i) => (\n//             <tr key={i}>\n//               <td>{user.user_id}</td>\n//               <td>{user.first_name}</td>\n//               <td>{user.last_name}</td>\n//               <td className=\"hidetext\">{user.password}</td>\n//               <td>{user.username}</td>\n//               <td>{user.email}</td>\n//               <td>{user.date_created}</td>\n//               <td>{user.is_active}</td>\n//               <td>{user.last_login}</td>\n//             </tr>\n//           ))}\n//         </tbody>\n//       </table>\n//       <h2>Movies Rated by User</h2>\n//       <table className=\"table\">\n//         <thead>\n//           <tr>\n//             <th>Movie ID</th>\n//             <th>Title</th>\n//             <th>Rating</th>\n//             <th>Comments</th>\n//           </tr>\n//         </thead>\n//         <tbody>\n//           {movies.map((movie, i) => (\n//             <tr key={i}>\n//               <td>{movie.movie_id}</td>\n//               <td>{movie.title}</td>\n//               <td>{movie.value}</td>\n//               <td>{movie.comments}</td>\n//             </tr>\n//           ))}\n//         </tbody>\n//       </table>\n//       <button onClick={handleLogout}>Logout</button>\n//     </div>\n//   );\n// };\n\n// export default UserProfile;"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}